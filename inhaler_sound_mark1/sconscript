Import('env')

Product = "Inhalersound"
Major = "00"
Minor = "01"

Version = "{product_name} {major_ver}.{minor_ver}".format(
        product_name = Product,
        major_ver = Major,
        minor_ver = Minor
)

env.EnableQt5Modules( [
        'QtCore',
        'QtWidgets',
        'QtGui',
] )

sources = [
        'application/main.cpp',
        'qt_windows/login.cpp',
        'qt_windows/administration.cpp',
        'qt_windows/patientdetails.cpp',
        'qt_windows/process_sounds_import_files.cpp',
        'qt_windows/process_sounds_intro_page.cpp',
        'qt_windows/process_sounds_get_patient_page.cpp',
        'qt_windows/process_sounds_confirm_files.cpp'
]

env.AppendUnique( STATICLIBS =
        env.BoostStaticLibs( [
        'program_options',
        'filesystem'
        ] )
)

uifiles = [
        'qt_windows/login.ui',
        'qt_windows/administration.ui',
]

env.Uic5( uifiles )

objects = env.Compile( sources )

import os
version_file = env.CreateVersion(
        'version.cpp',
        [ objects, uifiles ],
        [ 'inhalersound' ],
        Version,
        os.path.join( env['base_path'], ".." )
)

env.Build( 'inhalersound', [ objects, version_file ] )

